# Lydian-IQ Gateway Environment Configuration
# Copy to .env and configure for your environment

# Server Configuration
NODE_ENV=production
PORT=3100
HOST=0.0.0.0
LOG_LEVEL=info

# Proxy Configuration
# Set to true when behind reverse proxy (nginx, Azure Front Door, etc.)
TRUST_PROXY=true

# Concurrency Limiter Configuration
# Maximum number of concurrent requests being processed
GATEWAY_MAX_CONCURRENCY=64

# Maximum queue size for waiting requests
GATEWAY_QUEUE_SIZE=256

# Retry-After header value (seconds) for 429 responses
GATEWAY_RETRY_AFTER_SEC=1

# Rate Limiter Configuration
# Maximum requests per time window per IP
RATE_LIMIT_MAX=100

# Time window for rate limiting (e.g., "1 minute", "15 minutes", "1 hour")
RATE_LIMIT_WINDOW=1 minute

# Allow critical endpoints to bypass rate limiting
# When true, /api/capabilities, /api/health, /api/connectors/healthz bypass limits
RATE_LIMIT_ALLOW_CAPABILITIES=true

# CORS Configuration
# Comma-separated list of allowed origins
CORS_ORIGIN=http://localhost:3000,https://console.ailydian.com

# Database Configuration (if needed)
DATABASE_URL=postgresql://user:password@localhost:5432/lydian_iq_v3

# Redis Configuration (if needed)
REDIS_URL=redis://localhost:6379

# JWT Configuration (Mission 2)
JWT_SECRET=your-secret-key-here
JWT_EXPIRES_IN=1800

# Monitoring
ENABLE_METRICS=true
METRICS_PORT=9090
