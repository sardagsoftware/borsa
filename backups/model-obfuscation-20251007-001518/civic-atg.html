<!DOCTYPE html>
<html lang="tr">
<head>
    <link rel="icon" type="image/png" href="/lydian-logo.png">
    <link rel="apple-touch-icon" href="/lydian-logo.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Otomatik Güven Ağı - LyDian AI</title>

    <style>
        @font-face {
            font-family: 'Righteous';
            font-style: normal;
            font-weight: 400;
            font-display: block;
            src: url(https://fonts.gstatic.com/s/righteous/v14/1cXxaUPXBpj2rGoU7C9WhnGFucE.woff2) format('woff2');
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.min.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --lydian-primary: #10A37F;
            --lydian-dark: #FFFFFF;
            --lydian-darker: #FFFFFF;
            --lydian-accent: #0D8F6E;
            --bg-card: #FFFFFF;
            --text: #000000;
            --text-muted: #4B5563;
            --border: rgba(0, 0, 0, 0.08);
            --success: #10B981;
            --warning: #F59E0B;
            --danger: #EF4444;
            --info: #10A37F;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #FFFFFF;
            color: var(--text);
            min-height: 100vh;
            line-height: 1.6;
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 9999;
            max-width: 1400px;
            width: calc(100% - 80px);
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 0, 0, 0.08);
            border-radius: 20px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .nav-container {
            max-width: 100%;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 72px;
        }

        .logo {
            font-family: 'Righteous', cursive;
            font-size: 1.5rem;
            font-weight: 900;
            color: #000000;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo svg {
            width: 32px;
            height: 32px;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-link {
            color: var(--text-muted);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s;
        }

        .nav-links a {
            color: var(--text-muted);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s;
        }

        .nav-link:hover,
        .nav-links a:hover {
            color: #10A37F;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, rgba(16, 163, 127, 0.05) 0%, rgba(255, 107, 74, 0.05) 100%);
            padding: 8rem 2rem 4rem;
            border-bottom: 1px solid var(--border);
        }

        .hero-content {
            max-width: 1400px;
            margin: 0 auto;
            text-align: center;
        }

        .hero h1 {
            font-size: 3rem;
            font-weight: 900;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #10A37F, #FF6B4A);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero p {
            font-size: 1.25rem;
            color: var(--text-muted);
            max-width: 700px;
            margin: 0 auto 2rem;
        }

        /* Stats Grid */
        .stats-section {
            max-width: 1400px;
            margin: -3rem auto 3rem;
            padding: 0 2rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .stat-card {
            background: #FFFFFF;
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }

        .stat-card:hover {
            border-color: #10A37F;
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(16, 163, 127, 0.15);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            margin: 0 auto 1rem;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--lydian-primary);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-muted);
            font-weight: 500;
        }

        /* Main Content */
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 3rem 2rem;
        }

        .section {
            margin-bottom: 3rem;
        }

        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2rem;
        }

        .section-title {
            font-size: 1.75rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .section-title svg {
            width: 32px;
            height: 32px;
        }

        /* Trust Graph Visualization */
        .graph-container {
            background: #FFFFFF;
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }

        .graph-controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .control-btn {
            background: #FFFFFF;
            border: 1px solid var(--border);
            color: var(--text);
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .control-btn:hover {
            background: #10A37F;
            border-color: #10A37F;
            color: #FFFFFF;
        }

        .control-btn.active {
            background: #10A37F;
            border-color: #10A37F;
            color: #FFFFFF;
        }

        #trust-graph {
            width: 100%;
            height: 600px;
            background: #FAFAFA;
            border-radius: 12px;
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
        }

        /* Graph Legend */
        .graph-legend {
            display: flex;
            gap: 2rem;
            padding: 1rem;
            background: #FAFAFA;
            border: 1px solid var(--border);
            border-radius: 8px;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .legend-dot {
            width: 16px;
            height: 16px;
            border-radius: 50%;
        }

        .legend-dot.high { background: var(--success); }
        .legend-dot.medium { background: var(--warning); }
        .legend-dot.low { background: var(--danger); }
        .legend-dot.unknown { background: var(--text-muted); }

        /* Entity List */
        .entity-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .entity-card {
            background: #FFFFFF;
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }

        .entity-card:hover {
            border-color: #10A37F;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 163, 127, 0.1);
        }

        .entity-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .entity-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--lydian-primary), var(--lydian-accent));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .entity-info {
            flex: 1;
        }

        .entity-name {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 0.25rem;
        }

        .entity-type {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .trust-score {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .score-bar {
            flex: 1;
            height: 8px;
            background: var(--border);
            border-radius: 4px;
            overflow: hidden;
        }

        .score-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s;
        }

        .score-fill.high { background: var(--success); }
        .score-fill.medium { background: var(--warning); }
        .score-fill.low { background: var(--danger); }

        .score-value {
            font-weight: 700;
            font-size: 1rem;
        }

        /* Relationship Explorer */
        .relationship-list {
            background: #FFFFFF;
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }

        .relationship-item {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: background 0.2s;
        }

        .relationship-item:last-child {
            border-bottom: none;
        }

        .relationship-item:hover {
            background: #FAFAFA;
        }

        .relationship-info {
            flex: 1;
        }

        .relationship-entities {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .relationship-type {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .relationship-weight {
            background: #FAFAFA;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-weight: 700;
            min-width: 80px;
            text-align: center;
        }

        /* Anomaly Detection */
        .anomaly-alerts {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .anomaly-card {
            background: #FFFFFF;
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }

        .anomaly-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .anomaly-icon.critical {
            background: rgba(239, 68, 68, 0.1);
        }

        .anomaly-icon.warning {
            background: rgba(245, 158, 11, 0.1);
        }

        .anomaly-content {
            flex: 1;
        }

        .anomaly-title {
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .anomaly-description {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-bottom: 0.75rem;
        }

        .anomaly-time {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        /* Tooltip */
        .graph-tooltip {
            position: absolute;
            background: #FFFFFF;
            border: 1px solid #10A37F;
            border-radius: 8px;
            padding: 1rem;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            z-index: 1000;
            max-width: 300px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .graph-tooltip.visible {
            opacity: 1;
        }

        .tooltip-title {
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: #10A37F;
        }

        .tooltip-content {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .tooltip-stat {
            display: flex;
            justify-content: space-between;
            margin-top: 0.5rem;
            padding-top: 0.5rem;
            border-top: 1px solid var(--border);
        }

        /* Loading State */
        .loading-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 4rem 2rem;
            gap: 1rem;
        }

        .loading-spinner {
            width: 48px;
            height: 48px;
            border: 4px solid var(--border);
            border-top-color: var(--lydian-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2rem;
            }

            .hero p {
                font-size: 1rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .nav-links {
                display: none;
            }

            #trust-graph {
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <a href="/" class="logo">
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                    <rect x="4" y="4" width="24" height="24" rx="4" fill="url(#logoGrad1)"/>
                    <path d="M12 10h3v12h-3V10zm5 4h3v8h-3v-8z" fill="white"/>
                    <defs>
                        <linearGradient id="logoGrad1" x1="4" y1="4" x2="28" y2="28">
                            <stop offset="0%" stop-color="#10A37F"/>
                            <stop offset="100%" stop-color="#0D8F6E"/>
                        </linearGradient>
                    </defs>
                </svg>
                LyDian
            </a>
            <div class="nav-links">
                <a href="/index.html">Ana Sayfa</a>
                <a href="/dashboard.html">Dashboard</a>
                <a href="/docs.html">Dokümantasyon</a>
                <a href="/api.html">API</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1>Otomatik Güven Ağı Sistemi</h1>
            <p>Varlıklar arası ilişkileri görselleştirin, güven skorlarını analiz edin ve anomalileri gerçek zamanlı tespit edin.</p>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats-section">
        <div class="stats-grid">
            <div class="stat-card">
                <svg class="stat-icon" viewBox="0 0 24 24" fill="none">
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                    <circle cx="12" cy="12" r="6" fill="currentColor" opacity="0.2"/>
                    <circle cx="12" cy="12" r="3" fill="currentColor"/>
                </svg>
                <div class="stat-value" id="totalEntities">0</div>
                <div class="stat-label">Toplam Varlık</div>
            </div>

            <div class="stat-card">
                <svg class="stat-icon" viewBox="0 0 24 24" fill="none">
                    <path d="M7 12L12 7L17 12M7 12L12 17L17 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <circle cx="7" cy="12" r="2" fill="currentColor"/>
                    <circle cx="17" cy="12" r="2" fill="currentColor"/>
                    <circle cx="12" cy="7" r="2" fill="currentColor"/>
                    <circle cx="12" cy="17" r="2" fill="currentColor"/>
                </svg>
                <div class="stat-value" id="totalConnections">0</div>
                <div class="stat-label">Güven Bağlantıları</div>
            </div>

            <div class="stat-card">
                <svg class="stat-icon" viewBox="0 0 24 24" fill="none">
                    <path d="M12 2L15 8L22 9L17 14L18 21L12 18L6 21L7 14L2 9L9 8L12 2Z" stroke="currentColor" stroke-width="2" fill="none"/>
                </svg>
                <div class="stat-value" id="anomalyCount">0</div>
                <div class="stat-label">Tespit Edilen Anomaliler</div>
            </div>

            <div class="stat-card">
                <svg class="stat-icon" viewBox="0 0 24 24" fill="none">
                    <path d="M12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C17.5 22 22 17.5 22 12C22 6.5 17.5 2 12 2Z" stroke="currentColor" stroke-width="2"/>
                    <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <div class="stat-value" id="networkHealth">98%</div>
                <div class="stat-label">Ağ Sağlığı</div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="main-container">
        <!-- Trust Graph Visualization -->
        <section class="section">
            <div class="section-header">
                <h2 class="section-title">
                    <svg viewBox="0 0 24 24" fill="none">
                        <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2"/>
                        <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2"/>
                        <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    Güven Ağı Görselleştirme
                </h2>
            </div>

            <div class="graph-container">
                <div class="graph-controls">
                    <button class="control-btn active" onclick="filterGraph('all')">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <circle cx="8" cy="8" r="6" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        Tümü
                    </button>
                    <button class="control-btn" onclick="filterGraph('high')">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <circle cx="8" cy="8" r="6" fill="#10B981"/>
                        </svg>
                        Yüksek Güven
                    </button>
                    <button class="control-btn" onclick="filterGraph('medium')">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <circle cx="8" cy="8" r="6" fill="#F59E0B"/>
                        </svg>
                        Orta Güven
                    </button>
                    <button class="control-btn" onclick="filterGraph('low')">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <circle cx="8" cy="8" r="6" fill="#EF4444"/>
                        </svg>
                        Düşük Güven
                    </button>
                    <button class="control-btn" onclick="resetZoom()">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M2 2L14 14M14 2L2 14" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        Sıfırla
                    </button>
                </div>

                <div id="trust-graph"></div>

                <div class="graph-legend">
                    <div class="legend-item">
                        <div class="legend-dot high"></div>
                        <span>Yüksek Güven (80-100)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot medium"></div>
                        <span>Orta Güven (50-79)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot low"></div>
                        <span>Düşük Güven (0-49)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot unknown"></div>
                        <span>Belirsiz</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Entity List -->
        <section class="section">
            <div class="section-header">
                <h2 class="section-title">
                    <svg viewBox="0 0 24 24" fill="none">
                        <rect x="3" y="3" width="7" height="7" rx="2" stroke="currentColor" stroke-width="2"/>
                        <rect x="14" y="3" width="7" height="7" rx="2" stroke="currentColor" stroke-width="2"/>
                        <rect x="3" y="14" width="7" height="7" rx="2" stroke="currentColor" stroke-width="2"/>
                        <rect x="14" y="14" width="7" height="7" rx="2" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    Kayıtlı Varlıklar
                </h2>
            </div>

            <div class="entity-grid" id="entityList">
                <!-- Entities will be populated by JavaScript -->
            </div>
        </section>

        <!-- Relationship Explorer -->
        <section class="section">
            <div class="section-header">
                <h2 class="section-title">
                    <svg viewBox="0 0 24 24" fill="none">
                        <path d="M8 12H16M12 8V16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <circle cx="8" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
                        <circle cx="16" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    İlişki Keşfedici
                </h2>
            </div>

            <div class="relationship-list" id="relationshipList">
                <!-- Relationships will be populated by JavaScript -->
            </div>
        </section>

        <!-- Anomaly Detection -->
        <section class="section">
            <div class="section-header">
                <h2 class="section-title">
                    <svg viewBox="0 0 24 24" fill="none">
                        <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2"/>
                        <path d="M12 12V22" stroke="currentColor" stroke-width="2"/>
                        <circle cx="12" cy="17" r="2" fill="currentColor"/>
                    </svg>
                    Anomali Tespitleri
                </h2>
            </div>

            <div class="anomaly-alerts" id="anomalyList">
                <!-- Anomalies will be populated by JavaScript -->
            </div>
        </section>
    </main>

    <!-- Tooltip -->
    <div class="graph-tooltip" id="graphTooltip">
        <div class="tooltip-title" id="tooltipTitle"></div>
        <div class="tooltip-content" id="tooltipContent"></div>
    </div>

    <script>
        // Mock Data Generation
        const mockData = {
            entities: [
                { id: 1, name: 'Merkez Bankası', type: 'Finans Kurumu', trustScore: 95, connections: 12 },
                { id: 2, name: 'Büyük Şirket A', type: 'Özel Şirket', trustScore: 88, connections: 8 },
                { id: 3, name: 'Kamu Kurumu B', type: 'Devlet Kurumu', trustScore: 92, connections: 15 },
                { id: 4, name: 'Teknoloji Firması C', type: 'Özel Şirket', trustScore: 76, connections: 6 },
                { id: 5, name: 'Holding D', type: 'Özel Şirket', trustScore: 45, connections: 4 },
                { id: 6, name: 'Sivil Toplum Kuruluşu E', type: 'STK', trustScore: 82, connections: 9 },
                { id: 7, name: 'Üniversite F', type: 'Eğitim Kurumu', trustScore: 90, connections: 11 },
                { id: 8, name: 'Belediye G', type: 'Yerel Yönetim', trustScore: 78, connections: 7 }
            ],
            relationships: [
                { source: 1, target: 2, weight: 0.85, type: 'Finansal İlişki' },
                { source: 1, target: 3, weight: 0.92, type: 'Kurumsal İşbirliği' },
                { source: 2, target: 4, weight: 0.73, type: 'Ticari Ortaklık' },
                { source: 3, target: 6, weight: 0.88, type: 'Proje Ortaklığı' },
                { source: 4, target: 5, weight: 0.41, type: 'Tedarikçi İlişkisi' },
                { source: 6, target: 7, weight: 0.86, type: 'Akademik İşbirliği' },
                { source: 7, target: 8, weight: 0.79, type: 'Araştırma Projesi' },
                { source: 1, target: 7, weight: 0.90, type: 'Sponsorluk' },
                { source: 2, target: 6, weight: 0.67, type: 'Sosyal Sorumluluk' },
                { source: 3, target: 8, weight: 0.84, type: 'İdari Bağlantı' }
            ],
            anomalies: [
                {
                    id: 1,
                    severity: 'critical',
                    title: 'Beklenmedik Bağlantı Tespit Edildi',
                    description: 'Holding D ile Merkez Bankası arasında normalden 3x yüksek işlem hacmi',
                    timestamp: '2 saat önce'
                },
                {
                    id: 2,
                    severity: 'warning',
                    title: 'Güven Skoru Düşüşü',
                    description: 'Teknoloji Firması C\'nin güven skoru son 24 saatte %12 düştü',
                    timestamp: '5 saat önce'
                }
            ]
        };

        // Update Stats
        document.getElementById('totalEntities').textContent = mockData.entities.length;
        document.getElementById('totalConnections').textContent = mockData.relationships.length;
        document.getElementById('anomalyCount').textContent = mockData.anomalies.length;

        // Trust Score Helper
        function getTrustLevel(score) {
            if (score >= 80) return 'high';
            if (score >= 50) return 'medium';
            return 'low';
        }

        function getTrustColor(score) {
            if (score >= 80) return '#10B981';
            if (score >= 50) return '#F59E0B';
            return '#EF4444';
        }

        // Populate Entity List
        function populateEntities() {
            const entityList = document.getElementById('entityList');
            entityList.innerHTML = mockData.entities.map(entity => `
                <div class="entity-card" onclick="highlightEntity(${entity.id})">
                    <div class="entity-header">
                        <div class="entity-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                <path d="M12 2L2 7L12 12L22 7L12 2Z"/>
                                <path d="M2 17L12 22L22 17"/>
                                <path d="M2 12L12 17L22 12"/>
                            </svg>
                        </div>
                        <div class="entity-info">
                            <div class="entity-name">${entity.name}</div>
                            <div class="entity-type">${entity.type}</div>
                        </div>
                    </div>
                    <div class="trust-score">
                        <div class="score-bar">
                            <div class="score-fill ${getTrustLevel(entity.trustScore)}"
                                 style="width: ${entity.trustScore}%"></div>
                        </div>
                        <div class="score-value">${entity.trustScore}</div>
                    </div>
                    <div style="margin-top: 0.75rem; color: var(--text-muted); font-size: 0.85rem;">
                        ${entity.connections} bağlantı
                    </div>
                </div>
            `).join('');
        }

        // Populate Relationships
        function populateRelationships() {
            const relationshipList = document.getElementById('relationshipList');
            relationshipList.innerHTML = mockData.relationships.map(rel => {
                const source = mockData.entities.find(e => e.id === rel.source);
                const target = mockData.entities.find(e => e.id === rel.target);
                const weightPercent = Math.round(rel.weight * 100);
                return `
                    <div class="relationship-item">
                        <div class="relationship-info">
                            <div class="relationship-entities">
                                ${source.name} → ${target.name}
                            </div>
                            <div class="relationship-type">${rel.type}</div>
                        </div>
                        <div class="relationship-weight" style="color: ${getTrustColor(weightPercent)}">
                            ${weightPercent}%
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Populate Anomalies
        function populateAnomalies() {
            const anomalyList = document.getElementById('anomalyList');
            anomalyList.innerHTML = mockData.anomalies.map(anomaly => `
                <div class="anomaly-card">
                    <div class="anomaly-icon ${anomaly.severity}">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="${anomaly.severity === 'critical' ? '#EF4444' : '#F59E0B'}">
                            <path d="M12 2L2 7L12 12L22 7L12 2Z"/>
                            <circle cx="12" cy="12" r="3"/>
                        </svg>
                    </div>
                    <div class="anomaly-content">
                        <div class="anomaly-title">${anomaly.title}</div>
                        <div class="anomaly-description">${anomaly.description}</div>
                        <div class="anomaly-time">${anomaly.timestamp}</div>
                    </div>
                </div>
            `).join('');
        }

        // D3.js Trust Graph Visualization
        let simulation, svg, g, nodes, links, currentFilter = 'all';

        function initGraph() {
            const container = document.getElementById('trust-graph');
            const width = container.clientWidth;
            const height = container.clientHeight;

            // Create SVG
            svg = d3.select('#trust-graph')
                .append('svg')
                .attr('width', width)
                .attr('height', height);

            // Create zoom behavior
            const zoom = d3.zoom()
                .scaleExtent([0.5, 3])
                .on('zoom', (event) => {
                    g.attr('transform', event.transform);
                });

            svg.call(zoom);

            // Create container for graph elements
            g = svg.append('g');

            // Prepare data
            const graphNodes = mockData.entities.map(e => ({
                id: e.id,
                name: e.name,
                type: e.type,
                trustScore: e.trustScore,
                level: getTrustLevel(e.trustScore)
            }));

            const graphLinks = mockData.relationships.map(r => ({
                source: r.source,
                target: r.target,
                weight: r.weight,
                type: r.type
            }));

            // Create force simulation
            simulation = d3.forceSimulation(graphNodes)
                .force('link', d3.forceLink(graphLinks).id(d => d.id).distance(150))
                .force('charge', d3.forceManyBody().strength(-400))
                .force('center', d3.forceCenter(width / 2, height / 2))
                .force('collision', d3.forceCollide().radius(50));

            // Create links
            links = g.append('g')
                .selectAll('line')
                .data(graphLinks)
                .enter()
                .append('line')
                .attr('stroke', 'rgba(0, 0, 0, 0.15)')
                .attr('stroke-width', d => d.weight * 4)
                .attr('opacity', 0.6);

            // Create nodes
            nodes = g.append('g')
                .selectAll('circle')
                .data(graphNodes)
                .enter()
                .append('circle')
                .attr('r', d => 10 + (d.trustScore / 10))
                .attr('fill', d => getTrustColor(d.trustScore))
                .attr('stroke', '#FFFFFF')
                .attr('stroke-width', 3)
                .style('cursor', 'pointer')
                .style('filter', 'drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1))')
                .call(d3.drag()
                    .on('start', dragstarted)
                    .on('drag', dragged)
                    .on('end', dragended))
                .on('mouseenter', showTooltip)
                .on('mouseleave', hideTooltip);

            // Create labels
            const labels = g.append('g')
                .selectAll('text')
                .data(graphNodes)
                .enter()
                .append('text')
                .text(d => d.name)
                .attr('font-size', 11)
                .attr('font-weight', 500)
                .attr('fill', '#4B5563')
                .attr('text-anchor', 'middle')
                .attr('dy', -20)
                .style('pointer-events', 'none');

            // Update positions on tick
            simulation.on('tick', () => {
                links
                    .attr('x1', d => d.source.x)
                    .attr('y1', d => d.source.y)
                    .attr('x2', d => d.target.x)
                    .attr('y2', d => d.target.y);

                nodes
                    .attr('cx', d => d.x)
                    .attr('cy', d => d.y);

                labels
                    .attr('x', d => d.x)
                    .attr('y', d => d.y);
            });
        }

        // Drag functions
        function dragstarted(event, d) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
        }

        function dragged(event, d) {
            d.fx = event.x;
            d.fy = event.y;
        }

        function dragended(event, d) {
            if (!event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
        }

        // Tooltip functions
        function showTooltip(event, d) {
            const tooltip = document.getElementById('graphTooltip');
            tooltip.classList.add('visible');
            tooltip.style.left = (event.pageX + 10) + 'px';
            tooltip.style.top = (event.pageY - 10) + 'px';

            document.getElementById('tooltipTitle').textContent = d.name;
            document.getElementById('tooltipContent').innerHTML = `
                <div>${d.type}</div>
                <div class="tooltip-stat">
                    <span>Güven Skoru:</span>
                    <strong style="color: ${getTrustColor(d.trustScore)}">${d.trustScore}</strong>
                </div>
            `;
        }

        function hideTooltip() {
            document.getElementById('graphTooltip').classList.remove('visible');
        }

        // Filter graph
        function filterGraph(level) {
            currentFilter = level;

            // Update button states
            document.querySelectorAll('.control-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.closest('.control-btn').classList.add('active');

            // Filter nodes
            nodes.style('opacity', d => {
                if (level === 'all') return 1;
                return d.level === level ? 1 : 0.2;
            });

            // Filter links
            links.style('opacity', d => {
                if (level === 'all') return 0.6;
                const sourceLevel = getTrustLevel(d.source.trustScore);
                const targetLevel = getTrustLevel(d.target.trustScore);
                return (sourceLevel === level || targetLevel === level) ? 0.6 : 0.1;
            });
        }

        // Reset zoom
        function resetZoom() {
            svg.transition()
                .duration(750)
                .call(d3.zoom().transform, d3.zoomIdentity);
        }

        // Highlight entity
        function highlightEntity(entityId) {
            nodes.style('opacity', d => d.id === entityId ? 1 : 0.3);
            links.style('opacity', d =>
                (d.source.id === entityId || d.target.id === entityId) ? 0.8 : 0.1
            );

            setTimeout(() => {
                nodes.style('opacity', 1);
                links.style('opacity', 0.6);
            }, 3000);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            populateEntities();
            populateRelationships();
            populateAnomalies();
            initGraph();

            // Simulate real-time updates
            setInterval(() => {
                const randomEntity = mockData.entities[Math.floor(Math.random() * mockData.entities.length)];
                const change = Math.floor(Math.random() * 5) - 2;
                randomEntity.trustScore = Math.max(0, Math.min(100, randomEntity.trustScore + change));
                populateEntities();
            }, 10000);
        });

        // Handle window resize
        window.addEventListener('resize', () => {
            const container = document.getElementById('trust-graph');
            svg.attr('width', container.clientWidth)
               .attr('height', container.clientHeight);
            simulation.force('center', d3.forceCenter(container.clientWidth / 2, container.clientHeight / 2));
            simulation.alpha(0.3).restart();
        });
    </script>
</body>
</html>
